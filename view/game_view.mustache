{{> header}}

{{#mostrarFinalPartida}}
    <div class="overlay"></div>
    <div class="popup">
        <h1>Perdiste!</h1>
        <p class="emphasis">La respuesta correcta era:</p>
        <p>{{textoOpcionCorrecta}}</p>

        <p class="emphasis">Tu puntaje: {{puntuacion}}</p>
        <a href="/lobby/list" class="button button-small">Volver al lobby</a>
    </div>
{{/mostrarFinalPartida}}

<!-- Quizzium play -->

<div class="game">

    <div class="left-sidebar">


        <div class="profile">
            <img src="../public/profile-pictures/{{foto_perfil}}">
            <span>{{usuario}}</span>
        </div>
        <div class="answers">
            <span>{{puntuacion}}</span>
            <span>Respuestas Correctas</span>
        </div>
    </div>
    {{^mostrarFinalPartida}}
        <div class="block-reverse">
            <div class="right-sidebar">
                <div class="timer">
                    <span>Cronómetro</span>
                    <span id="cronometro">20</span>
                </div>
            </div>

            <div class="round">
                <!--   Tirarlo para la izquierda con tipografía de sugerir pregunta -->
                <div class="redirect">
                    <a href="/lobby/list">Ir al lobby</a>
                </div>

                <!--   Tirarlo para la derecha más grande -->
                <div class="categoria">
                    <span id="question">{{categoryName}}</span>
                </div>
                <div class="question" style="{{categoryColor}}">
                    <span id="question">{{question}}</span>
                </div>

                <form method="post" enctype="multipart/form-data" action="/game/list">

                    <input type="hidden" name="idQuestion" value={{id_question}}>

                    <button  id="option_1" class="answer" name="option" value="1">{{opcion1}}</button>
                    <button  id="option_2" class="answer" name="option" value="2">{{opcion2}}</button>
                    <button  id="option_3" class="answer" name="option" value="3">{{opcion3}}</button>
                    <button  id="option_4" class="answer" name="option" value="4">{{opcion4}}</button>

                </form>

                <div class="container-link">
                    <a href="/play/report">
                        <img src="../public/assets/exclamation.png"/>
                        Reportar esta pregunta
                    </a>
                </div>
            </div>
        </div>
    {{/mostrarFinalPartida}}
</div>


<script>
    function mostrarPopup() {
        var popupBackground = document.getElementById('popup-background');
        var popup = document.getElementById('popup');
        var disableButton = document.getElementById('disable-button');

        popupBackground.style.display = 'block';
        popup.style.display = 'block';
        disableButton.disabled = true;
    }

    function cerrarPopup() {
        var popupBackground = document.getElementById('popup-background');
        var popup = document.getElementById('popup');
        var disableButton = document.getElementById('disable-button');

        popupBackground.style.display = 'none';
        popup.style.display = 'none';
        disableButton.disabled = false;
    }
</script>

<script src='https://code.jquery.com/jquery-3.6.0.min.js'></script>



<script>

    window.onload = function() {
        let tiempo = 19; // tiempo inicial en segundos

        let intervalo = setInterval(function() {

            $('#cronometro').text(tiempo);
            tiempo--;

            if(tiempo < 0){
                clearInterval(intervalo);
                //aca tiene que mandarte que perdiste y mostrarte el pop up
                //y hacer la logica de cargar la pregunta que respondio mal el usuario
            }

        }, 1000);
    }


</script>

<!-- End Page Content -->
{{> footer}}


<!--
function play() {
$.ajax({

url: 'http://localhost/game/nuevaPregunta',
method: 'get',
success: function (data) {
// Manejar la respuesta del backend aquí
alert(data); //data bi muestra bada
$('#question').text(data.question);
$('#option_1').text(data.opcion1);
$('#option_2').text(data.opcion2);
$('#option_3').text(data.opcion3);
$('#option_4').text(data.opcion4);
},
error: function (xhr, status, error) {
// Manejar errores aquí
alert('Se rompió todo');
}
});
}
-->